{"version":3,"sources":["../../../src/features/unified-share-modal/SharedLinkSection.js"],"names":["React","FormattedMessage","PlainButton","Button","GuideTooltip","TextInputWithCopyButton","Toggle","Tooltip","convertToMs","IconMail","IconClock","IconGlobe","bdlWatermelonRed","isBoxNote","Browser","convertToBoxItem","SharedLinkAccessMenu","SharedLinkPermissionMenu","messages","ANYONE_IN_COMPANY","ANYONE_WITH_LINK","CAN_EDIT","CAN_VIEW_DOWNLOAD","CAN_VIEW_ONLY","PEOPLE_IN_ITEM","SharedLinkSection","props","isSharedLinkEnabled","canAddLink","canRemoveLink","isAllowEditSharedLinkForFileEnabled","sharedLink","canChangeAccessLevel","isEditSettingAvailable","isDownloadSettingAvailable","permissionLevel","allowedPermissionLevels","filter","level","state","isAutoCreatingSharedLink","isCopySuccessful","isSharedLinkEditTooltipShown","autoCreateSharedLink","addSharedLink","submitting","url","isNewSharedLink","setState","prevProps","sharedLinkEditTooltipTargetingApi","triggerCopyOnLoad","onCopyError","onCopySuccess","onCopyInit","toggleRef","focus","canWriteToClipboard","navigator","clipboard","writeText","then","catch","getAllowedPermissionLevels","includes","canShow","onShow","autofocusSharedLink","changeSharedLinkAccessLevel","changeSharedLinkPermissionLevel","config","item","itemType","intl","onDismissTooltip","onEmailSharedLinkClick","sharedLinkEditTagTargetingApi","trackingProps","tooltips","accessLevel","accessLevelsDisabledReason","allowedAccessLevels","enterpriseName","isEditAllowed","copyButtonProps","onChangeSharedLinkAccessLevel","onChangeSharedLinkPermissionLevel","onSharedLinkAccessMenuOpen","onSharedLinkCopy","sendSharedLinkButtonProps","sharedLinkAccessMenuButtonProps","sharedLinkPermissionsMenuButtonProps","shouldTriggerCopyOnLoad","hideEmailButton","showEmailSharedLinkForm","isEditableBoxNote","formatMessage","sharedLinkURLLabel","sendSharedLink","ftuxEditPermissionTooltipTitle","ftuxEditPermissionTooltipBody","onClose","sharedLinkPermissionsEditTooltip","sharedLinkPermissionsEdit","sharedLinkEditablePubliclyAvailable","sharedLinkPubliclyAvailable","sharedLinkElevatedEditableCompanyAvailable","onSettingsClick","showSharedLinkSettingsCallout","sharedLinkSettingsButtonProps","sharedLinkSettingsCalloutText","settingsButtonLabel","sharedLinkSettings","onToggleSharedLink","expirationTimestamp","canAddSharedLink","grantedPermissions","itemShare","canRemoveSharedLink","isToggleEnabled","linkText","linkShareOn","sharedLinkExpirationTooltip","expiration","linkShareOff","toggleComponent","ref","sharedLinkToggleTooltip","sharedLinkDisabledTooltipCopy","tooltipDisabledMessage","removeLinkTooltip","disabledCreateLinkTooltip","sharedLinkSectionLabel","renderToggle","renderSharedLinkSettingsLink","renderSharedLink","Component"],"mappings":"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","sourcesContent":["// @flow\n\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport PlainButton from '../../components/plain-button';\nimport Button from '../../components/button';\nimport GuideTooltip from '../../components/guide-tooltip';\nimport TextInputWithCopyButton from '../../components/text-input-with-copy-button';\nimport Toggle from '../../components/toggle/Toggle';\nimport Tooltip from '../../components/tooltip';\nimport { convertToMs } from '../../utils/datetime';\nimport IconMail from '../../icons/general/IconMail';\nimport IconClock from '../../icons/general/IconClock';\nimport IconGlobe from '../../icons/general/IconGlobe';\nimport { bdlWatermelonRed } from '../../styles/variables';\nimport type { ItemType } from '../../common/types/core';\nimport type { TargetingApi } from '../targeting/types';\nimport { isBoxNote } from '../../utils/file';\nimport Browser from '../../utils/Browser';\n\nimport convertToBoxItem from './utils/item';\nimport SharedLinkAccessMenu from './SharedLinkAccessMenu';\nimport SharedLinkPermissionMenu from './SharedLinkPermissionMenu';\nimport messages from './messages';\nimport type {\n    accessLevelType,\n    item as itemtype,\n    permissionLevelType,\n    sharedLinkType,\n    sharedLinkTrackingType,\n    tooltipComponentIdentifierType,\n    USMConfig,\n} from './flowTypes';\nimport {\n    ANYONE_IN_COMPANY,\n    ANYONE_WITH_LINK,\n    CAN_EDIT,\n    CAN_VIEW_DOWNLOAD,\n    CAN_VIEW_ONLY,\n    PEOPLE_IN_ITEM,\n} from './constants';\n\ntype Props = {\n    addSharedLink: () => void,\n    autoCreateSharedLink?: boolean,\n    autofocusSharedLink?: boolean,\n    changeSharedLinkAccessLevel: (newAccessLevel: accessLevelType) => Promise<{ accessLevel: accessLevelType }>,\n    changeSharedLinkPermissionLevel: (\n        newPermissionLevel: permissionLevelType,\n    ) => Promise<{ permissionLevel: permissionLevelType }>,\n    config?: USMConfig,\n    intl: any,\n    isAllowEditSharedLinkForFileEnabled: boolean,\n    item: itemtype,\n    itemType: ItemType,\n    onCopyError?: () => void,\n    onCopyInit?: () => void,\n    onCopySuccess?: () => void,\n    onDismissTooltip: (componentIdentifier: tooltipComponentIdentifierType) => void,\n    onEmailSharedLinkClick: Function,\n    onSettingsClick?: Function,\n    onToggleSharedLink: Function,\n    sharedLink: sharedLinkType,\n    sharedLinkEditTagTargetingApi?: TargetingApi,\n    sharedLinkEditTooltipTargetingApi?: TargetingApi,\n    showSharedLinkSettingsCallout: boolean,\n    submitting: boolean,\n    tooltips: { [componentIdentifier: tooltipComponentIdentifierType]: React.Node },\n    trackingProps: sharedLinkTrackingType,\n    triggerCopyOnLoad?: boolean,\n};\n\ntype State = {\n    isAutoCreatingSharedLink: boolean,\n    isCopySuccessful: ?boolean,\n    isSharedLinkEditTooltipShown: boolean,\n};\n\nclass SharedLinkSection extends React.Component<Props, State> {\n    static defaultProps = {\n        trackingProps: {},\n        autoCreateSharedLink: false,\n    };\n\n    toggleRef: HTMLInputElement | null;\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            isAutoCreatingSharedLink: false,\n            isCopySuccessful: null,\n            isSharedLinkEditTooltipShown: false,\n        };\n    }\n\n    componentDidMount() {\n        const { sharedLink, autoCreateSharedLink, addSharedLink, submitting } = this.props;\n\n        if (\n            autoCreateSharedLink &&\n            !this.state.isAutoCreatingSharedLink &&\n            sharedLink &&\n            !sharedLink.url &&\n            !submitting &&\n            !sharedLink.isNewSharedLink\n        ) {\n            this.setState({ isAutoCreatingSharedLink: true });\n            addSharedLink();\n        }\n    }\n\n    // We handle didUpdate but not didMount because\n    // the component initially renders with empty data\n    // in order to start showing UI components.\n    // When getInitialData completes in the parent we\n    // rerender with correct sharedLink data and can\n    // check whether to auto create a new one.\n    // Note: we are assuming the 2nd render is safe\n    // to start doing this check.\n    componentDidUpdate(prevProps: Props) {\n        const {\n            sharedLink,\n            autoCreateSharedLink,\n            addSharedLink,\n            sharedLinkEditTooltipTargetingApi,\n            submitting,\n            triggerCopyOnLoad,\n            onCopyError = () => {},\n            onCopySuccess = () => {},\n            onCopyInit = () => {},\n        } = this.props;\n\n        const { isAutoCreatingSharedLink, isCopySuccessful, isSharedLinkEditTooltipShown } = this.state;\n\n        if (\n            autoCreateSharedLink &&\n            !isAutoCreatingSharedLink &&\n            !sharedLink.url &&\n            !submitting &&\n            !sharedLink.isNewSharedLink\n        ) {\n            this.setState({ isAutoCreatingSharedLink: true });\n            addSharedLink();\n        }\n\n        if (!prevProps.sharedLink.url && sharedLink.url) {\n            this.setState({ isAutoCreatingSharedLink: false });\n            if (this.toggleRef) {\n                this.toggleRef.focus();\n            }\n        }\n\n        if (\n            Browser.canWriteToClipboard() &&\n            triggerCopyOnLoad &&\n            !isAutoCreatingSharedLink &&\n            sharedLink.url &&\n            isCopySuccessful === null\n        ) {\n            onCopyInit();\n            navigator.clipboard\n                .writeText(sharedLink.url)\n                .then(() => {\n                    this.setState({ isCopySuccessful: true });\n                    onCopySuccess();\n                })\n                .catch(() => {\n                    this.setState({ isCopySuccessful: false });\n                    onCopyError();\n                });\n        }\n\n        // if ESL ftux tooltip is showing on initial mount, we call onShow\n        const allowedPermissionLevels = this.getAllowedPermissionLevels();\n\n        if (\n            allowedPermissionLevels.includes(CAN_EDIT) &&\n            sharedLinkEditTooltipTargetingApi &&\n            sharedLinkEditTooltipTargetingApi.canShow &&\n            !isSharedLinkEditTooltipShown\n        ) {\n            const { onShow } = sharedLinkEditTooltipTargetingApi;\n            onShow();\n            this.setState({ isSharedLinkEditTooltipShown: true });\n        }\n    }\n\n    canAddSharedLink = (isSharedLinkEnabled: boolean, canAddLink: boolean) => {\n        return !isSharedLinkEnabled && canAddLink;\n    };\n\n    canRemoveSharedLink = (isSharedLinkEnabled: boolean, canRemoveLink: boolean) => {\n        return isSharedLinkEnabled && canRemoveLink;\n    };\n\n    getAllowedPermissionLevels = (): Array<permissionLevelType> => {\n        const { isAllowEditSharedLinkForFileEnabled, sharedLink } = this.props;\n\n        const {\n            canChangeAccessLevel,\n            isEditSettingAvailable,\n            isDownloadSettingAvailable,\n            permissionLevel,\n        } = sharedLink;\n\n        let allowedPermissionLevels = [CAN_EDIT, CAN_VIEW_DOWNLOAD, CAN_VIEW_ONLY];\n\n        if (!canChangeAccessLevel) {\n            // remove all but current level\n            allowedPermissionLevels = allowedPermissionLevels.filter(level => level === permissionLevel);\n        }\n\n        // if we cannot set the download value, we remove this option from the dropdown\n        if (!isDownloadSettingAvailable) {\n            allowedPermissionLevels = allowedPermissionLevels.filter(level => level !== CAN_VIEW_DOWNLOAD);\n        }\n\n        // if the user cannot edit, we remove this option from the dropdown\n        if (!isEditSettingAvailable || !isAllowEditSharedLinkForFileEnabled) {\n            allowedPermissionLevels = allowedPermissionLevels.filter(level => level !== CAN_EDIT);\n        }\n\n        return allowedPermissionLevels;\n    };\n\n    renderSharedLink() {\n        const {\n            autofocusSharedLink,\n            changeSharedLinkAccessLevel,\n            changeSharedLinkPermissionLevel,\n            config,\n            item,\n            itemType,\n            intl,\n            onDismissTooltip,\n            onEmailSharedLinkClick,\n            sharedLink,\n            sharedLinkEditTagTargetingApi,\n            sharedLinkEditTooltipTargetingApi,\n            submitting,\n            trackingProps,\n            triggerCopyOnLoad,\n            tooltips,\n        } = this.props;\n\n        const { isCopySuccessful, isSharedLinkEditTooltipShown } = this.state;\n\n        const {\n            accessLevel,\n            accessLevelsDisabledReason,\n            allowedAccessLevels,\n            canChangeAccessLevel,\n            enterpriseName,\n            isEditAllowed,\n            permissionLevel,\n            url,\n        } = sharedLink;\n\n        const {\n            copyButtonProps,\n            onChangeSharedLinkAccessLevel,\n            onChangeSharedLinkPermissionLevel,\n            onSharedLinkAccessMenuOpen,\n            onSharedLinkCopy,\n            sendSharedLinkButtonProps,\n            sharedLinkAccessMenuButtonProps,\n            sharedLinkPermissionsMenuButtonProps,\n        } = trackingProps;\n\n        const shouldTriggerCopyOnLoad = !!triggerCopyOnLoad && !!isCopySuccessful;\n\n        /**\n         * The email button should be rendered by default.\n         * Only hide the button if there is a config prop that declares showEmailSharedLinkForm to be false.\n         */\n        const hideEmailButton = config && config.showEmailSharedLinkForm === false;\n\n        const isEditableBoxNote = isBoxNote(convertToBoxItem(item)) && isEditAllowed;\n        const allowedPermissionLevels = this.getAllowedPermissionLevels();\n\n        return (\n            <>\n                <div className=\"shared-link-field-row\">\n                    <Tooltip\n                        className=\"usm-ftux-tooltip\"\n                        isShown={!!tooltips['shared-link-copy-button']}\n                        onDismiss={() => onDismissTooltip('shared-link-copy-button')}\n                        position=\"middle-right\"\n                        showCloseButton\n                        text={tooltips['shared-link-copy-button']}\n                        theme=\"callout\"\n                    >\n                        <TextInputWithCopyButton\n                            aria-label={intl.formatMessage(messages.sharedLinkURLLabel)}\n                            autofocus={autofocusSharedLink}\n                            buttonProps={copyButtonProps}\n                            className=\"shared-link-field-container\"\n                            disabled={submitting}\n                            label=\"\"\n                            onCopySuccess={onSharedLinkCopy}\n                            triggerCopyOnLoad={shouldTriggerCopyOnLoad}\n                            type=\"url\"\n                            value={url}\n                        />\n                    </Tooltip>\n                    {!hideEmailButton && (\n                        <Tooltip position=\"top-left\" text={<FormattedMessage {...messages.sendSharedLink} />}>\n                            <Button\n                                aria-label={intl.formatMessage(messages.sendSharedLink)}\n                                className=\"email-shared-link-btn\"\n                                isDisabled={submitting}\n                                onClick={onEmailSharedLinkClick}\n                                type=\"button\"\n                                {...sendSharedLinkButtonProps}\n                            >\n                                <IconMail />\n                            </Button>\n                        </Tooltip>\n                    )}\n                </div>\n\n                <div className=\"shared-link-access-row\">\n                    <SharedLinkAccessMenu\n                        accessLevel={accessLevel}\n                        accessLevelsDisabledReason={accessLevelsDisabledReason}\n                        allowedAccessLevels={allowedAccessLevels}\n                        changeAccessLevel={changeSharedLinkAccessLevel}\n                        enterpriseName={enterpriseName}\n                        itemType={itemType}\n                        onDismissTooltip={() => onDismissTooltip('shared-link-access-menu')}\n                        tooltipContent={tooltips['shared-link-access-menu'] || null}\n                        submitting={submitting}\n                        trackingProps={{\n                            onChangeSharedLinkAccessLevel,\n                            onSharedLinkAccessMenuOpen,\n                            sharedLinkAccessMenuButtonProps,\n                        }}\n                    />\n                    {!isEditableBoxNote && accessLevel !== PEOPLE_IN_ITEM && (\n                        <GuideTooltip\n                            isShown={\n                                allowedPermissionLevels.includes(CAN_EDIT) && sharedLinkEditTooltipTargetingApi?.canShow\n                            }\n                            title={intl.formatMessage(messages.ftuxEditPermissionTooltipTitle)}\n                            body={intl.formatMessage(messages.ftuxEditPermissionTooltipBody)}\n                            onDismiss={() => {\n                                if (sharedLinkEditTooltipTargetingApi) {\n                                    const { onClose } = sharedLinkEditTooltipTargetingApi;\n                                    onClose();\n                                }\n                            }}\n                            position=\"bottom-center\"\n                        >\n                            <SharedLinkPermissionMenu\n                                allowedPermissionLevels={allowedPermissionLevels}\n                                canChangePermissionLevel={canChangeAccessLevel}\n                                changePermissionLevel={changeSharedLinkPermissionLevel}\n                                isSharedLinkEditTooltipShown={isSharedLinkEditTooltipShown}\n                                permissionLevel={permissionLevel}\n                                sharedLinkEditTagTargetingApi={sharedLinkEditTagTargetingApi}\n                                sharedLinkEditTooltipTargetingApi={sharedLinkEditTooltipTargetingApi}\n                                submitting={submitting}\n                                trackingProps={{\n                                    onChangeSharedLinkPermissionLevel,\n                                    sharedLinkPermissionsMenuButtonProps,\n                                }}\n                            />\n                        </GuideTooltip>\n                    )}\n                    {isEditableBoxNote && (\n                        <Tooltip text={<FormattedMessage {...messages.sharedLinkPermissionsEditTooltip} />}>\n                            <PlainButton isDisabled className=\"can-edit-btn\">\n                                <FormattedMessage {...messages.sharedLinkPermissionsEdit} />\n                            </PlainButton>\n                        </Tooltip>\n                    )}\n                </div>\n                {accessLevel === ANYONE_WITH_LINK && (\n                    <div className=\"security-indicator-note\">\n                        <span className=\"security-indicator-icon-globe\">\n                            <IconGlobe height={12} width={12} />\n                        </span>\n                        {permissionLevel === CAN_EDIT ? (\n                            <FormattedMessage\n                                data-testid=\"shared-link-editable-publicly-available-message\"\n                                {...messages.sharedLinkEditablePubliclyAvailable}\n                            />\n                        ) : (\n                            <FormattedMessage\n                                data-testid=\"shared-link-publicly-available-message\"\n                                {...messages.sharedLinkPubliclyAvailable}\n                            />\n                        )}\n                    </div>\n                )}\n                {accessLevel === ANYONE_IN_COMPANY && permissionLevel === CAN_EDIT && (\n                    <div className=\"security-indicator-note\">\n                        <span className=\"security-indicator-icon-globe\">\n                            <IconGlobe height={12} width={12} />\n                        </span>\n                        <FormattedMessage\n                            data-testid=\"shared-link-elevated-editable-company-available-message\"\n                            {...messages.sharedLinkElevatedEditableCompanyAvailable}\n                        />\n                    </div>\n                )}\n            </>\n        );\n    }\n\n    renderSharedLinkSettingsLink() {\n        const {\n            intl,\n            onDismissTooltip,\n            onSettingsClick,\n            showSharedLinkSettingsCallout,\n            trackingProps,\n            tooltips,\n        } = this.props;\n        const { sharedLinkSettingsButtonProps } = trackingProps;\n\n        return (\n            <div className=\"shared-link-settings-btn-container\">\n                <Tooltip\n                    className=\"usm-ftux-tooltip\"\n                    isShown={!!tooltips['shared-link-settings'] || showSharedLinkSettingsCallout}\n                    onDismiss={() => onDismissTooltip('shared-link-settings')}\n                    position=\"middle-right\"\n                    showCloseButton\n                    text={\n                        tooltips['shared-link-settings'] || (\n                            <FormattedMessage {...messages.sharedLinkSettingsCalloutText} />\n                        )\n                    }\n                    theme=\"callout\"\n                >\n                    <PlainButton\n                        {...sharedLinkSettingsButtonProps}\n                        aria-label={intl.formatMessage(messages.settingsButtonLabel)}\n                        className=\"shared-link-settings-btn\"\n                        onClick={onSettingsClick}\n                        type=\"button\"\n                    >\n                        <FormattedMessage {...messages.sharedLinkSettings} />\n                    </PlainButton>\n                </Tooltip>\n            </div>\n        );\n    }\n\n    renderToggle() {\n        const { item, onDismissTooltip, onToggleSharedLink, sharedLink, submitting, tooltips } = this.props;\n        const { canChangeAccessLevel, expirationTimestamp, url } = sharedLink;\n        const isSharedLinkEnabled = !!url;\n        const canAddSharedLink = this.canAddSharedLink(isSharedLinkEnabled, item.grantedPermissions.itemShare);\n        const canRemoveSharedLink = this.canRemoveSharedLink(isSharedLinkEnabled, canChangeAccessLevel);\n        const isToggleEnabled = (canAddSharedLink || canRemoveSharedLink) && !submitting;\n\n        let linkText;\n\n        if (isSharedLinkEnabled) {\n            linkText = <FormattedMessage {...messages.linkShareOn} />;\n            if (expirationTimestamp && expirationTimestamp !== 0) {\n                linkText = (\n                    <span>\n                        <FormattedMessage {...messages.linkShareOn} />\n                        <Tooltip\n                            position=\"top-center\"\n                            text={\n                                <FormattedMessage\n                                    {...messages.sharedLinkExpirationTooltip}\n                                    values={{\n                                        expiration: convertToMs(expirationTimestamp),\n                                    }}\n                                />\n                            }\n                        >\n                            <span className=\"shared-link-expiration-badge\">\n                                <IconClock color={bdlWatermelonRed} />\n                            </span>\n                        </Tooltip>\n                    </span>\n                );\n            }\n        } else {\n            linkText = <FormattedMessage {...messages.linkShareOff} />;\n        }\n\n        const toggleComponent = (\n            <div className=\"share-toggle-container\">\n                <Toggle\n                    isDisabled={!isToggleEnabled}\n                    isOn={isSharedLinkEnabled}\n                    label={linkText}\n                    name=\"toggle\"\n                    onChange={onToggleSharedLink}\n                    ref={ref => {\n                        this.toggleRef = ref;\n                    }}\n                />\n            </div>\n        );\n\n        if (!submitting) {\n            if (canAddSharedLink) {\n                const sharedLinkToggleTooltip = tooltips['shared-link-toggle'];\n                if (sharedLinkToggleTooltip) {\n                    return (\n                        <Tooltip\n                            className=\"usm-ftux-tooltip\"\n                            isShown\n                            onDismiss={() => onDismissTooltip('shared-link-toggle')}\n                            position=\"middle-left\"\n                            showCloseButton\n                            text={sharedLinkToggleTooltip}\n                            theme=\"callout\"\n                        >\n                            {toggleComponent}\n                        </Tooltip>\n                    );\n                }\n                return (\n                    <Tooltip\n                        position=\"top-right\"\n                        text={<FormattedMessage {...messages.sharedLinkDisabledTooltipCopy} />}\n                    >\n                        {toggleComponent}\n                    </Tooltip>\n                );\n            }\n\n            if (!isToggleEnabled) {\n                const tooltipDisabledMessage = isSharedLinkEnabled\n                    ? messages.removeLinkTooltip\n                    : messages.disabledCreateLinkTooltip;\n\n                return (\n                    <Tooltip\n                        className=\"usm-disabled-message-tooltip\"\n                        position=\"top-right\"\n                        text={<FormattedMessage {...tooltipDisabledMessage} />}\n                    >\n                        {toggleComponent}\n                    </Tooltip>\n                );\n            }\n        }\n\n        return toggleComponent;\n    }\n\n    render() {\n        const { sharedLink, onSettingsClick } = this.props;\n        const isSharedLinkEnabled = !!sharedLink.url;\n\n        return (\n            <div className=\"be\">\n                <hr className=\"bdl-SharedLinkSection-separator\" />\n                {/* eslint-disable-next-line jsx-a11y/label-has-for */}\n                <label>\n                    <span className=\"label bdl-Label\">\n                        <FormattedMessage {...messages.sharedLinkSectionLabel} />\n                    </span>\n                </label>\n                <div className=\"shared-link-toggle-row\">\n                    {this.renderToggle()}\n                    {isSharedLinkEnabled && onSettingsClick && this.renderSharedLinkSettingsLink()}\n                </div>\n                {isSharedLinkEnabled && this.renderSharedLink()}\n            </div>\n        );\n    }\n}\n\nexport default SharedLinkSection;\n"],"file":"SharedLinkSection.js"}