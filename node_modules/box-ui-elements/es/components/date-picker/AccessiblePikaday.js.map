{"version":3,"sources":["../../../src/components/date-picker/AccessiblePikaday.ts"],"names":["Pikaday","AccessiblePikaday","options","hide","event","isVisible","datePickerButtonEl","contains","target","el","currentFocusEl","document","activeElement","accessibleFieldEl","tabIndex","focus","classList","add","body","appendChild","addEventListener","handleBlur","handleClickOutside","adjustPosition","removeEventListener"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,OAAP,MAAwC,SAAxC;;AAOA;IACMC,iB;;;;;AAKF,6BAAYC,OAAZ,EAA+C;AAAA;;AAAA;;AAC3C,2FAAMA,OAAN;;AAD2C,iEAkBlC,YAAM;AACf,YAAKC,IAAL;AACH,KApB8C;;AAAA,yEAsB1B,UAACC,KAAD,EAAuB;AACxC,UACI,MAAKC,SAAL,MACA,MAAKC,kBADL,IAEA,MAAKA,kBAAL,CAAwBC,QAAxB,CAAiCH,KAAK,CAACI,MAAvC,CAHJ,EAIE;AACE;AACH;;AAED,UAAI,MAAKH,SAAL,MAAoB,CAAC,MAAKI,EAAL,CAAQF,QAAR,CAAiBH,KAAK,CAACI,MAAvB,CAAzB,EAAwE;AACpE,cAAKL,IAAL;;AAEA,YAAMO,cAAc,GAAGC,QAAQ,CAACC,aAAhC;;AACA,YAAI,MAAKC,iBAAL,IAA0BH,cAA1B,IAA4CA,cAAc,CAACI,QAAf,GAA0B,CAA1E,EAA6E;AACzE,gBAAKD,iBAAL,CAAuBE,KAAvB;AACH;AACJ;AACJ,KAvC8C;;AAE3C,UAAKF,iBAAL,GAAyBX,OAAO,CAACW,iBAAjC;AACA,UAAKP,kBAAL,GAA0BJ,OAAO,CAACI,kBAAlC,CAH2C,CAK3C;AACA;AACA;;AACA,QAAI,MAAKO,iBAAT,EAA4B;AACxB,YAAKJ,EAAL,CAAQO,SAAR,CAAkBC,GAAlB,CAAsB,UAAtB;;AACAN,MAAAA,QAAQ,CAACO,IAAT,CAAcC,WAAd,CAA0B,MAAKV,EAA/B;;AAEA,YAAKI,iBAAL,CAAuBO,gBAAvB,CAAwC,MAAxC,EAAgD,MAAKC,UAArD;;AAEA,YAAKlB,IAAL;AACH;;AAf0C;AAgB9C;;;;2BAyBM;AACH;;AACA,UAAI,KAAKU,iBAAT,EAA4B;AACxBF,QAAAA,QAAQ,CAACS,gBAAT,CAA0B,OAA1B,EAAmC,KAAKE,kBAAxC,EAA4D,IAA5D;AACA,aAAKC,cAAL;AACH;AACJ;;;2BAEM;AACH;;AACA,UAAI,KAAKV,iBAAT,EAA4B;AACxBF,QAAAA,QAAQ,CAACa,mBAAT,CAA6B,OAA7B,EAAsC,KAAKF,kBAA3C;AACH;AACJ;;;8BAES;AACN;;AACA,UAAI,KAAKT,iBAAT,EAA4B;AACxB,aAAKA,iBAAL,CAAuBW,mBAAvB,CAA2C,MAA3C,EAAmD,KAAKH,UAAxD;AACAV,QAAAA,QAAQ,CAACa,mBAAT,CAA6B,OAA7B,EAAsC,KAAKF,kBAA3C;AACH;AACJ;;;;EAnE2BtB,O;;AAsEhC,eAAeC,iBAAf","sourcesContent":["import Pikaday, { PikadayOptions } from 'pikaday';\n\nexport interface AccessiblePikadayOptions extends PikadayOptions {\n    accessibleFieldEl?: HTMLElement | null | undefined;\n    datePickerButtonEl?: HTMLElement | null | undefined;\n}\n\n// An extended version of Pikaday to work when `isAccessible` prop is `true`\nclass AccessiblePikaday extends Pikaday {\n    accessibleFieldEl: HTMLElement | null | undefined;\n\n    datePickerButtonEl: HTMLElement | null | undefined;\n\n    constructor(options: AccessiblePikadayOptions) {\n        super(options);\n        this.accessibleFieldEl = options.accessibleFieldEl;\n        this.datePickerButtonEl = options.datePickerButtonEl;\n\n        // Override behavior as if `options.field` and `options.bound` were set.\n        // See https://github.com/Pikaday/Pikaday/blob/master/pikaday.js#L671\n        //     https://github.com/Pikaday/Pikaday/blob/master/pikaday.js#L695-L703\n        if (this.accessibleFieldEl) {\n            this.el.classList.add('is-bound');\n            document.body.appendChild(this.el);\n\n            this.accessibleFieldEl.addEventListener('blur', this.handleBlur);\n\n            this.hide();\n        }\n    }\n\n    handleBlur = () => {\n        this.hide();\n    };\n\n    handleClickOutside = (event: MouseEvent) => {\n        if (\n            this.isVisible() &&\n            this.datePickerButtonEl &&\n            this.datePickerButtonEl.contains(event.target as HTMLElement)\n        ) {\n            return;\n        }\n\n        if (this.isVisible() && !this.el.contains(event.target as HTMLElement)) {\n            this.hide();\n\n            const currentFocusEl = document.activeElement as HTMLElement;\n            if (this.accessibleFieldEl && currentFocusEl && currentFocusEl.tabIndex < 0) {\n                this.accessibleFieldEl.focus();\n            }\n        }\n    };\n\n    show() {\n        super.show();\n        if (this.accessibleFieldEl) {\n            document.addEventListener('click', this.handleClickOutside, true);\n            this.adjustPosition();\n        }\n    }\n\n    hide() {\n        super.hide();\n        if (this.accessibleFieldEl) {\n            document.removeEventListener('click', this.handleClickOutside);\n        }\n    }\n\n    destroy() {\n        super.destroy();\n        if (this.accessibleFieldEl) {\n            this.accessibleFieldEl.removeEventListener('blur', this.handleBlur);\n            document.removeEventListener('click', this.handleClickOutside);\n        }\n    }\n}\n\nexport default AccessiblePikaday;\n"],"file":"AccessiblePikaday.js"}