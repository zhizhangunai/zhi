{"version":3,"sources":["../../../../src/elements/content-sidebar/versions/VersionsSidebar.js"],"names":["React","FormattedMessage","InlineError","messages","SidebarContent","VersionsMenu","BackButton","PlainButton","DEFAULT_FETCH_END","LoadingIndicatorWrapper","MAX_VERSIONS","VersionsSidebar","error","errorTitle","onUpgradeClick","isLoading","parentName","versions","rest","showLimit","length","showVersions","showEmpty","showError","versionsTitle","versionUpgradeLink","versionsEmpty","versionMaxEntries","maxVersions"],"mappings":";;;;;;AAAA;;;;;AAMA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,gBAAT,QAAiC,YAAjC;AAEA,OAAOC,WAAP,MAAwB,kCAAxB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,OAAOC,WAAP,MAAwB,8CAAxB;AACA,SAASC,iBAAT,QAAkC,oBAAlC;AACA,SAASC,uBAAT,QAAwC,uCAAxC;AAEA,OAAO,wBAAP;AAEA,IAAMC,YAAY,GAAGF,iBAArB;;AAcA,IAAMG,eAAe,GAAG,SAAlBA,eAAkB,OAA4F;AAAA,MAAzFC,KAAyF,QAAzFA,KAAyF;AAAA,MAAlFC,UAAkF,QAAlFA,UAAkF;AAAA,MAAtEC,cAAsE,QAAtEA,cAAsE;AAAA,MAAtDC,SAAsD,QAAtDA,SAAsD;AAAA,MAA3CC,UAA2C,QAA3CA,UAA2C;AAAA,MAA/BC,QAA+B,QAA/BA,QAA+B;AAAA,MAAlBC,IAAkB;;AAChH,MAAMC,SAAS,GAAGF,QAAQ,CAACG,MAAT,IAAmBV,YAArC;AACA,MAAMW,YAAY,GAAG,CAAC,CAACJ,QAAQ,CAACG,MAAhC;AACA,MAAME,SAAS,GAAG,CAACP,SAAD,IAAc,CAACM,YAAf,IAA+B,CAACP,cAAlD;AACA,MAAMS,SAAS,GAAG,CAAC,CAACX,KAApB;AAEA,SACI,oBAAC,cAAD;AACI,IAAA,SAAS,EAAC,cADd;AAEI,4BAAqB,SAFzB;AAGI,0BAAmB,UAHvB;AAII,IAAA,KAAK,EACD,0CACI,oBAAC,UAAD;AAAY,2BAAkB,MAA9B;AAAqC,MAAA,EAAE,aAAMI,UAAN;AAAvC,MADJ,EAEI,oBAAC,gBAAD,EAAsBb,QAAQ,CAACqB,aAA/B,CAFJ;AALR,KAWI,oBAAC,uBAAD;AAAyB,IAAA,SAAS,EAAC,sBAAnC;AAA0D,IAAA,eAAe,EAAC,KAA1E;AAAgF,IAAA,SAAS,EAAET;AAA3F,KACKQ,SAAS,IACN,oBAAC,WAAD;AAAa,IAAA,KAAK,EAAE,oBAAC,gBAAD,EAAsBV,UAAtB;AAApB,KACI,oBAAC,gBAAD,EAAsBD,KAAtB,CADJ,EAEKE,cAAc,IACX,oBAAC,WAAD;AACI,IAAA,OAAO,EAAEA,cADb;AAEI,yBAAkB,4CAFtB;AAGI,IAAA,IAAI,EAAC,QAHT;AAII,IAAA,SAAS,EAAC;AAJd,KAMI,oBAAC,gBAAD,EAAsBX,QAAQ,CAACsB,kBAA/B,CANJ,CAHR,CAFR,EAiBKH,SAAS,IACN;AAAK,IAAA,SAAS,EAAC;AAAf,KACI,oBAAC,gBAAD,EAAsBnB,QAAQ,CAACuB,aAA/B,CADJ,CAlBR,EAuBKL,YAAY,IACT;AAAK,IAAA,SAAS,EAAC;AAAf,KACI,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAEJ;AAAxB,KAAsCC,IAAtC,EADJ,CAxBR,EA4BKC,SAAS,IACN;AAAK,IAAA,SAAS,EAAC,yBAAf;AAAyC,mBAAY;AAArD,KACI,oBAAC,gBAAD,eACQhB,QAAQ,CAACwB,iBADjB;AAEI,IAAA,MAAM,EAAE;AACJC,MAAAA,WAAW,EAAElB;AADT;AAFZ,KADJ,CA7BR,CAXJ,CADJ;AAqDH,CA3DD;;AA6DA,eAAeC,eAAf","sourcesContent":["/**\n * @flow\n * @file Versions Sidebar component\n * @author Box\n */\n\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport type { MessageDescriptor } from 'react-intl';\nimport InlineError from '../../../components/inline-error';\nimport messages from './messages';\nimport SidebarContent from '../SidebarContent';\nimport VersionsMenu from './VersionsMenu';\nimport { BackButton } from '../../common/nav-button';\nimport PlainButton from '../../../components/plain-button/PlainButton';\nimport { DEFAULT_FETCH_END } from '../../../constants';\nimport { LoadingIndicatorWrapper } from '../../../components/loading-indicator';\nimport type { BoxItemVersion } from '../../../common/types/core';\nimport './VersionsSidebar.scss';\n\nconst MAX_VERSIONS = DEFAULT_FETCH_END;\n\ntype Props = {\n    error?: MessageDescriptor,\n    errorTitle?: MessageDescriptor,\n    fileId: string,\n    isLoading: boolean,\n    onUpgradeClick?: () => void,\n    parentName: string,\n    versionCount: number,\n    versionLimit: number,\n    versions: Array<BoxItemVersion>,\n};\n\nconst VersionsSidebar = ({ error, errorTitle, onUpgradeClick, isLoading, parentName, versions, ...rest }: Props) => {\n    const showLimit = versions.length >= MAX_VERSIONS;\n    const showVersions = !!versions.length;\n    const showEmpty = !isLoading && !showVersions && !onUpgradeClick;\n    const showError = !!error;\n\n    return (\n        <SidebarContent\n            className=\"bcs-Versions\"\n            data-resin-component=\"preview\"\n            data-resin-feature=\"versions\"\n            title={\n                <>\n                    <BackButton data-resin-target=\"back\" to={`/${parentName}`} />\n                    <FormattedMessage {...messages.versionsTitle} />\n                </>\n            }\n        >\n            <LoadingIndicatorWrapper className=\"bcs-Versions-content\" crawlerPosition=\"top\" isLoading={isLoading}>\n                {showError && (\n                    <InlineError title={<FormattedMessage {...errorTitle} />}>\n                        <FormattedMessage {...error} />\n                        {onUpgradeClick && (\n                            <PlainButton\n                                onClick={onUpgradeClick}\n                                data-resin-target=\"versioning_error_error_message_upgrade_cta\"\n                                type=\"button\"\n                                className=\"bcs-Versions-upgrade\"\n                            >\n                                <FormattedMessage {...messages.versionUpgradeLink} />\n                            </PlainButton>\n                        )}\n                    </InlineError>\n                )}\n\n                {showEmpty && (\n                    <div className=\"bcs-Versions-empty\">\n                        <FormattedMessage {...messages.versionsEmpty} />\n                    </div>\n                )}\n\n                {showVersions && (\n                    <div className=\"bcs-Versions-menu\">\n                        <VersionsMenu versions={versions} {...rest} />\n                    </div>\n                )}\n                {showLimit && (\n                    <div className=\"bcs-Versions-maxEntries\" data-testid=\"max-versions\">\n                        <FormattedMessage\n                            {...messages.versionMaxEntries}\n                            values={{\n                                maxVersions: MAX_VERSIONS,\n                            }}\n                        />\n                    </div>\n                )}\n            </LoadingIndicatorWrapper>\n        </SidebarContent>\n    );\n};\n\nexport default VersionsSidebar;\n"],"file":"VersionsSidebar.js"}