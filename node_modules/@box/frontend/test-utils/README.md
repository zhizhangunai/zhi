# test-utils

Utilities for test environments

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [getLocalizedMessageFormatter.js](#getlocalizedmessageformatterjs)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## getLocalizedMessageFormatter.js

Exports a factory that creates a function to translate messages in the test environment.
This allows selecting elements by their content.

```js
// test.setup.js
import getLocalizedMessageFormatter from '@box/frontend/test-utils/getLocalizedMessageFormatter';
import messages from '../../i18n/en-US';
const l = getLocalizedMessageFormatter(messages);

// Example: set the translation helper as a global
global.l = l;
```

```js
// src/my-form/messages.js
export default defineMessages({
  expandedLabel: {
    id: 'my-comp.expanded-label',
    defaultMessage: 'Shipping info for {username}',
    description: 'label for expanded form',
  },
});
```

```js
// src/my-form/my-form.test.js
test('shows label when expanded', () => {
  const user = { name: 'Jane', id: 123 };
  const wrapper = mount(<MyForm expanded user={user} />);
  const actual = wrapper.props()['aria-label'];
  const expected = l('my-comp.expanded-label', { username: 'Jane' });
  expect(actual).toEqual(expected);
  expect(el).toMatchInlineSnapshot(`
  <form aria-label="Shipping info for Jane">
    Address: <input type="text" />
  </form>
`);
});
```
